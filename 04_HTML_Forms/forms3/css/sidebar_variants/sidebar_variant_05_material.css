/**
 * SIDEBAR VARIANTE 5: Material Design 3
 * =====================================
 * Google Material Design 3 Richtlinien
 * - Surface Tones mit Elevation
 * - Ripple-Effekt bei Klick
 * - Rounded Corners (28px)
 * - Touch-freundlich (min 44px)
 *
 * VERWENDUNG: In shell.html einbinden:
 * <link rel="stylesheet" href="css/sidebar_variants/sidebar_variant_05_material.css">
 */

/* ============================================
   MATERIAL DESIGN 3 - CSS VARIABLEN
   ============================================ */
:root {
    /* Primary Palette - CONSEC Blau adaptiert */
    --md-primary: #1a237e;
    --md-primary-container: #c5cae9;
    --md-on-primary: #ffffff;
    --md-on-primary-container: #0d1259;

    /* Surface & Background */
    --md-surface: #fdfcff;
    --md-surface-variant: #e7e0ec;
    --md-surface-container: #f3edf7;
    --md-surface-container-high: #ece6f0;
    --md-surface-container-highest: #e6e0e9;

    /* On-Surface Colors */
    --md-on-surface: #1c1b1f;
    --md-on-surface-variant: #49454f;
    --md-outline: #79747e;
    --md-outline-variant: #cac4d0;

    /* Elevation Shadows */
    --md-elevation-1: 0 1px 2px rgba(0,0,0,0.3), 0 1px 3px 1px rgba(0,0,0,0.15);
    --md-elevation-2: 0 1px 2px rgba(0,0,0,0.3), 0 2px 6px 2px rgba(0,0,0,0.15);
    --md-elevation-3: 0 4px 8px 3px rgba(0,0,0,0.15), 0 1px 3px rgba(0,0,0,0.3);

    /* Typography */
    --md-font-family: 'Segoe UI', 'Roboto', 'Helvetica Neue', sans-serif;
    --md-label-large: 500 14px/20px var(--md-font-family);
    --md-label-medium: 500 12px/16px var(--md-font-family);
    --md-title-small: 500 14px/20px var(--md-font-family);

    /* Motion */
    --md-duration-short: 200ms;
    --md-duration-medium: 400ms;
    --md-easing-standard: cubic-bezier(0.2, 0, 0, 1);
    --md-easing-emphasized: cubic-bezier(0.2, 0, 0, 1);
}

/* ============================================
   SIDEBAR CONTAINER
   ============================================ */
.sidebar {
    width: 220px !important;
    background: var(--md-surface) !important;
    border-right: none !important;
    box-shadow: var(--md-elevation-2) !important;
    display: flex !important;
    flex-direction: column !important;
    overflow: hidden !important;
    transition: width var(--md-duration-medium) var(--md-easing-standard) !important;
}

/* ============================================
   HEADER - Material App Bar Style
   ============================================ */
.sidebar-header {
    background: var(--md-primary) !important;
    color: var(--md-on-primary) !important;
    padding: 20px 16px !important;
    font: var(--md-title-small) !important;
    font-size: 16px !important;
    font-weight: 500 !important;
    letter-spacing: 0.15px !important;
    text-align: left !important;
    min-height: 56px !important;
    display: flex !important;
    align-items: center !important;
    box-shadow: var(--md-elevation-1) !important;
    position: relative !important;
    z-index: 2 !important;
}

/* ============================================
   MENU KATEGORIEN CONTAINER
   ============================================ */
.menu-categories {
    flex: 1 !important;
    display: flex !important;
    flex-direction: column !important;
    overflow-y: auto !important;
    overflow-x: hidden !important;
    padding: 8px 0 !important;
    background: var(--md-surface) !important;
    /* Gleichmäßige Verteilung */
    justify-content: flex-start !important;
    gap: 4px !important;
}

/* Scrollbar im Material Style */
.menu-categories::-webkit-scrollbar {
    width: 4px !important;
}

.menu-categories::-webkit-scrollbar-track {
    background: transparent !important;
}

.menu-categories::-webkit-scrollbar-thumb {
    background: var(--md-outline-variant) !important;
    border-radius: 4px !important;
}

.menu-categories::-webkit-scrollbar-thumb:hover {
    background: var(--md-outline) !important;
}

/* ============================================
   KATEGORIE BLOCK
   ============================================ */
.category-block {
    margin: 0 8px 8px 8px !important;
    background: var(--md-surface-container) !important;
    border-radius: 16px !important;
    overflow: hidden !important;
    box-shadow: var(--md-elevation-1) !important;
    transition: box-shadow var(--md-duration-short) var(--md-easing-standard) !important;
}

.category-block:hover {
    box-shadow: var(--md-elevation-2) !important;
}

.category-block:last-child {
    margin-bottom: 8px !important;
}

/* ============================================
   KATEGORIE HEADER
   ============================================ */
.category-header {
    background: var(--md-primary-container) !important;
    color: var(--md-on-primary-container) !important;
    padding: 12px 16px !important;
    font: var(--md-label-medium) !important;
    font-weight: 600 !important;
    text-transform: uppercase !important;
    letter-spacing: 0.5px !important;
    border-bottom: 1px solid var(--md-outline-variant) !important;
}

/* ============================================
   MENU BUTTONS - Material Navigation Rail Item
   ============================================ */
.menu-btn {
    /* Layout */
    display: flex !important;
    align-items: center !important;
    width: 100% !important;
    min-height: 48px !important; /* Touch-freundlich */
    padding: 12px 16px !important;
    margin: 0 !important;

    /* Typography */
    font: var(--md-label-large) !important;
    font-weight: 500 !important;
    text-align: left !important;
    color: var(--md-on-surface) !important;
    letter-spacing: 0.1px !important;

    /* Appearance */
    background: transparent !important;
    border: none !important;
    border-radius: 0 !important;
    cursor: pointer !important;

    /* Transitions */
    transition:
        background-color var(--md-duration-short) var(--md-easing-standard),
        color var(--md-duration-short) var(--md-easing-standard) !important;

    /* Ripple Container */
    position: relative !important;
    overflow: hidden !important;
}

/* Erster Button in Block - Top Radius */
.category-header + .menu-btn {
    border-radius: 0 !important;
}

/* Letzter Button in Block - Bottom Radius */
.category-block > .menu-btn:last-child {
    border-radius: 0 0 16px 16px !important;
}

/* ============================================
   HOVER STATE
   ============================================ */
.menu-btn:hover {
    background: rgba(26, 35, 126, 0.08) !important;
    color: var(--md-primary) !important;
}

/* ============================================
   FOCUS STATE (Keyboard Navigation)
   ============================================ */
.menu-btn:focus-visible {
    outline: 2px solid var(--md-primary) !important;
    outline-offset: -2px !important;
    background: rgba(26, 35, 126, 0.12) !important;
}

/* ============================================
   ACTIVE/PRESSED STATE
   ============================================ */
.menu-btn:active {
    background: rgba(26, 35, 126, 0.16) !important;
    transform: scale(0.98) !important;
}

/* ============================================
   SELECTED STATE (.active)
   ============================================ */
.menu-btn.active {
    background: var(--md-primary-container) !important;
    color: var(--md-on-primary-container) !important;
    font-weight: 600 !important;
    border-radius: 28px !important;
    margin: 4px 8px !important;
    width: calc(100% - 16px) !important;
}

.menu-btn.active:hover {
    background: color-mix(in srgb, var(--md-primary-container) 90%, var(--md-primary) 10%) !important;
}

/* ============================================
   RIPPLE EFFEKT
   ============================================ */
.menu-btn::before {
    content: '' !important;
    position: absolute !important;
    top: 50% !important;
    left: 50% !important;
    width: 0 !important;
    height: 0 !important;
    background: radial-gradient(circle, rgba(26, 35, 126, 0.3) 0%, transparent 70%) !important;
    border-radius: 50% !important;
    transform: translate(-50%, -50%) !important;
    opacity: 0 !important;
    pointer-events: none !important;
    transition: width 0.6s ease-out, height 0.6s ease-out, opacity 0.4s ease-out !important;
}

.menu-btn:active::before {
    width: 300px !important;
    height: 300px !important;
    opacity: 1 !important;
    transition: width 0s, height 0s, opacity 0s !important;
}

/* Alternative Ripple mit Animation */
@keyframes md-ripple {
    0% {
        transform: translate(-50%, -50%) scale(0);
        opacity: 0.5;
    }
    100% {
        transform: translate(-50%, -50%) scale(2.5);
        opacity: 0;
    }
}

.menu-btn.ripple::after {
    content: '' !important;
    position: absolute !important;
    width: 100% !important;
    height: 100% !important;
    top: 50% !important;
    left: 50% !important;
    background: var(--md-primary) !important;
    border-radius: 50% !important;
    pointer-events: none !important;
    animation: md-ripple 0.6s ease-out !important;
}

/* ============================================
   TOOLTIP (Material Style)
   ============================================ */
.menu-btn[title]:hover::after {
    content: attr(title) !important;
    position: absolute !important;
    left: calc(100% + 8px) !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
    background: var(--md-on-surface) !important;
    color: var(--md-surface) !important;
    padding: 6px 12px !important;
    border-radius: 4px !important;
    font: var(--md-label-medium) !important;
    white-space: nowrap !important;
    z-index: 1000 !important;
    box-shadow: var(--md-elevation-2) !important;
    animation: tooltip-fade-in var(--md-duration-short) var(--md-easing-standard) !important;
}

.menu-btn[title]:hover::before {
    content: none !important; /* Kein Pfeil für Material */
}

@keyframes tooltip-fade-in {
    from {
        opacity: 0;
        transform: translateY(-50%) translateX(-4px);
    }
    to {
        opacity: 1;
        transform: translateY(-50%) translateX(0);
    }
}

/* ============================================
   RESPONSIVE: Buttons gleichmäßig verteilen
   wenn wenige Buttons vorhanden
   ============================================ */
@media (min-height: 700px) {
    .menu-categories {
        justify-content: space-evenly !important;
    }

    .category-block {
        flex-shrink: 0 !important;
    }

    .menu-btn {
        min-height: 52px !important;
    }
}

@media (min-height: 900px) {
    .menu-btn {
        min-height: 56px !important;
        padding: 14px 16px !important;
    }

    .category-block {
        margin: 0 12px 12px 12px !important;
    }
}

/* ============================================
   DARK MODE SUPPORT (optional)
   ============================================ */
@media (prefers-color-scheme: dark) {
    :root {
        --md-primary: #b3c5ff;
        --md-primary-container: #2d4a8e;
        --md-on-primary: #00297b;
        --md-on-primary-container: #dce1ff;
        --md-surface: #1c1b1f;
        --md-surface-variant: #49454f;
        --md-surface-container: #211f26;
        --md-on-surface: #e6e1e5;
        --md-on-surface-variant: #cac4d0;
        --md-outline: #938f99;
        --md-outline-variant: #49454f;
    }
}

/* ============================================
   JAVASCRIPT HELPER: Ripple hinzufügen
   ============================================ */
/*
   Für echten Ripple-Effekt in JavaScript:

   document.querySelectorAll('.menu-btn').forEach(btn => {
       btn.addEventListener('click', function(e) {
           const ripple = document.createElement('span');
           ripple.classList.add('md-ripple-effect');

           const rect = this.getBoundingClientRect();
           const x = e.clientX - rect.left;
           const y = e.clientY - rect.top;

           ripple.style.left = x + 'px';
           ripple.style.top = y + 'px';

           this.appendChild(ripple);

           setTimeout(() => ripple.remove(), 600);
       });
   });
*/

.md-ripple-effect {
    position: absolute !important;
    width: 20px !important;
    height: 20px !important;
    background: rgba(26, 35, 126, 0.3) !important;
    border-radius: 50% !important;
    transform: translate(-50%, -50%) scale(0) !important;
    animation: md-ripple-expand 0.6s ease-out forwards !important;
    pointer-events: none !important;
}

@keyframes md-ripple-expand {
    to {
        transform: translate(-50%, -50%) scale(15);
        opacity: 0;
    }
}
